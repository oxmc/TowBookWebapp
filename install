#!/bin/bash

echo "Installing DisWeb..."
mkdir -p $HOME/.local/share
mkdir -p $HOME/.local/share/applications
cd $HOME
if [ -f "DisWeb-base.zip" ]; then
  rm -rf DisWeb-base.zip
fi
wget https://github.com/oxmc/diswebreleaseserver/releases/download/Base/DisWeb-base.zip
sudo apt install -y unzip libnotify-bin at-spi2-core mate-notification-daemon mate-notification-daemon-common
sudo unzip $HOME/DisWeb-base.zip -d $HOME/.local/share
echo "[Desktop Entry]
Name=DisWeb
Exec=$HOME/.local/share/DisWeb-linux-armv7l/DisWeb
Icon=$HOME/.local/share/DisWeb-linux-armv7l/resources/app/src/icons/app.png
Terminal=false
GenericName=Internet Messenger
Type=Application
StartupNotify=true
Categories=Network;InstantMessaging;Utility;
Encoding=UTF-8" > $HOME/.local/share/applications/DisWeb.desktop
echo "DisWeb has been installed successfully!"
cd $HOME
rm -rf $HOME/DisWeb.zip
echo "You can find DisWeb in Menu > Accessories > DisWeb."
